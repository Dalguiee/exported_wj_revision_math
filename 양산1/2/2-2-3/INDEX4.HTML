<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>개정교육과정-수학 확인문제</title>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="KeyWORDs" content="" />
    <meta name="Description" content="" />
    <meta name="Robots" content="all" />
    <meta http-equiv="Subject" content="" />
    <meta http-equiv="Title" content="" />
    <meta http-equiv="Author" content="onflou " />
    <meta http-equiv="Publisher" content="" />

    <!-- 브라우저 호환성을 지정 -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge,chorme=1" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" href="#" />
    <link href="../../../COMM/CSS/COMMON.CSS" rel="stylesheet" />
    <link href="../../../COMM/CSS/CONCEPTCOMMON.CSS" rel="stylesheet" />
    <link href="../../../COMM/CSS/VIDEO.CSS" rel="stylesheet" />

    <style>
      /* common */
      .main__wrapper {
        width: 100%;
        height: 100%;
        position: relative;
      }

      .step1 .char1,
      .step2 .char1,
      .step3 .char1,
      .step4 .char1,
      .step5 .char1,
      .step6 .char1,
      .step7 .char1 {
        width: 300px;
        height: 345px;
        position: absolute;
        bottom: -48px;
        right: 17px;
      }

      /* 1p */

      .main__top__wrapper {
        width: 1600px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0 auto;
        padding-top: 127px;
      }

      /* 3p */

      .step3 .main__top__wrapper {
        padding-top: 170px;
      }

      .step3 .top__answer__box {
        position: relative;
      }

      .arrow__box {
        width: 734px;
        height: 558px;
        position: absolute;
        top: 50%;
        transform: translate(-50%, -50%);
        left: 50%;
      }

      .arrow__inner__box {
        position: relative;
        width: 100%;
        height: 100%;
      }

      .arrow__inner__box > img {
        position: absolute;
        width: 76px;
        height: 76px;
      }

      .arrow__box .top {
        top: 0;
        left: 50%;
        transform: translateX(-50%);
      }

      .arrow__box .left {
        top: 50%;
        transform: translateY(-50%);
        left: 0;
      }

      .arrow__box .right {
        top: 50%;
        transform: translateY(-50%);
        right: 0;
      }

      .arrow__box .bottom {
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
      }

      /* 4p */

      .one__inner__box > img {
        position: absolute;
        width: 76px;
        height: 76px;
      }

      .one__inner__box .tr {
        top: 0;
        right: 0;
      }

      .one__inner__box .tl {
        top: 0;
        left: 0;
      }

      .one__inner__box .br {
        bottom: 0;
        right: 0;
      }

      .one__inner__box .bl {
        bottom: 0;
        left: 0;
      }

      .step4 .top__answer__box {
        position: relative;
      }
    </style>
  </head>

  <body>
    <div id="wrap">
      <div
        id="contents-wrap"
        class="concept"
        style="position: absolute; display: block"
      ></div>
      <div id="contents-main" style="display: none" class="check-questions">
        <div class="check-questions_inner">
          <header class="header">
            <div class="header_title">
              <button class="sound-btn"></button>
              <!-- 1/2 title-->
              <h3>□ 모양을 알아봅시다.</h3>
              <!-- 2/2 title -->
              <!-- <h3>원을 찾아봅시다.</h3> -->
            </div>

            <div class="page__wrapper">
              <span>1</span>
              <p>/</p>
              <span>2</span>
            </div>
          </header>
          <main class="main">
            <div class="main_content">
              <!-- 콘텐츠영역 -->
              <div class="step step1" style="display: none">
                <!-- step1 시작부분 -->
                <div class="main__wrapper">
                  <div class="main__top__wrapper">
                    <div class="top__answer__box">
                      <img
                        src="../../../COMM/IMG/CONCEPT/2_2_3/P1__ANSWER1.png"
                      />
                    </div>
                  </div>
                </div>

                <img class="char1" src="../../../COMM/IMG/CONCEPT/CHAR0.png" />
              </div>

              <div class="step step2" style="display: none">
                <!-- step1 시작부분 -->
                <div class="main__wrapper">
                  <div class="main__top__wrapper">
                    <div class="top__answer__box">
                      <img
                        src="../../../COMM/IMG/CONCEPT/2_2_3/P1__ANSWER2.png"
                      />
                    </div>
                  </div>
                </div>

                <img class="char1" src="../../../COMM/IMG/CONCEPT/CHAR0.png" />
              </div>

              <div class="step step3" style="display: none">
                <!-- step1 시작부분 -->
                <div class="main__wrapper">
                  <div class="main__top__wrapper">
                    <div class="top__answer__box">
                      <img
                        src="../../../COMM/IMG/CONCEPT/2_2_3/P1__ANSWER2.png"
                      />

                      <div class="arrow__box">
                        <div class="arrow__inner__box">
                          <img
                            class="top"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__AROOW__BOTTOM.png"
                            alt=""
                          />

                          <img
                            class="left"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__ARROW__RIGHT.png"
                            alt=""
                          />

                          <img
                            class="right"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__ARROW__LEFT.png"
                            alt=""
                          />

                          <img
                            class="bottom"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__AROOW__TOP.png"
                            alt=""
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <img class="char1" src="../../../COMM/IMG/CONCEPT/CHAR0.png" />
              </div>

              <div class="step step4" style="display: none">
                <!-- step1 시작부분 -->
                <div class="main__wrapper">
                  <div class="main__top__wrapper">
                    <div class="top__answer__box">
                      <img
                        src="../../../COMM/IMG/CONCEPT/2_2_3/P1__ANSWER2.png"
                      />

                      <div class="arrow__box">
                        <div class="arrow__inner__box">
                          <div class="one__inner__box">
                            <img
                              class="tr"
                              src="../../../COMM/IMG/CONCEPT/2_2_3/3P__ONE.png"
                              alt=""
                            />

                            <img
                              class="tl"
                              src="../../../COMM/IMG/CONCEPT/2_2_3/3P__ONE.png"
                              alt=""
                            />

                            <img
                              class="br"
                              src="../../../COMM/IMG/CONCEPT/2_2_3/3P__ONE.png"
                              alt=""
                            />

                            <img
                              class="bl"
                              src="../../../COMM/IMG/CONCEPT/2_2_3/3P__ONE.png"
                              alt=""
                            />
                          </div>

                          <img
                            class="top"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__AROOW__BOTTOM.png"
                            alt=""
                          />

                          <img
                            class="left"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__ARROW__RIGHT.png"
                            alt=""
                          />

                          <img
                            class="right"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__ARROW__LEFT.png"
                            alt=""
                          />

                          <img
                            class="bottom"
                            src="../../../COMM/IMG/CONCEPT/2_2_3/PINK__AROOW__TOP.png"
                            alt=""
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <img class="char1" src="../../../COMM/IMG/CONCEPT/CHAR0.png" />
                <img class="char1" src="../../../COMM/IMG/CONCEPT/CHAR0.png" />
              </div>

              <div class="step step5" style="display: block">
                <!-- step1 시작부분 -->
                <div class="main__wrapper"><di</div>
                <img class="char1" src="../../../COMM/IMG/CONCEPT/CHAR0.png" />
              </div>

              <div class="step step6" style="display: none">
                <!-- step1 시작부분 -->
                <div class="main__wrapper"></div>
                <img
                  class="char1"
                  src="../../../COMM/IMG/CONCEPT/2_2_4/CHAR2.png"
                />
              </div>

              <div class="step step7" style="display: none">
                <div class="main__wrapper"></div>

                <img
                  class="char1"
                  src="../../../COMM/IMG/CONCEPT/2_2_4/CHAR3.png"
                />
              </div>

              <!-- 랜덤페이지 -->
              <div class="step step8" style="display: none">
                <!-- step1 시작부분 -->
                <div class="main__wrapper"></div>
              </div>
            </div>

            <div class="main_prev-next">
              <button class="btn-prev" disabled="true">이전버튼</button>
              <button class="btn-next" disabled="true">다음버튼</button>
            </div>
            <ul class="step-list">
              <li class="step-list_item active"></li>
              <li class="step-list_item"></li>
              <li class="step-list_item"></li>
              <li class="step-list_item"></li>
              <li class="step-list_item"></li>
            </ul>
          </main>
        </div>
      </div>
    </div>

    <script
      crossorigin
      src="https://www.unpkg.com/jquery@3.7.1/dist/jquery.min.js"
    ></script>
    <script src="../../../COMM/JS/COMMON2.JS"></script>
    <script src="../../../COMM/JS/GAME.JS"></script>
    <script src="../../../COMM/JS/VIDEO.JS"></script>
    <script src="../../../COMM/JS/VIDEO-HTTP-STREAMING.JS"></script>
    <script defer src="../../../COMM/JS/TOUCHDND.JS"></script>
    <script>
      /*
       * 데이터
       */
      let intro = {
        title: "사각형을 알아볼까요",
        subTitle: [
          "사각형의 개념을 이해하고 특징을 설명해 봐요.",
          "주변에서 사각형을 찾아봐요.",
        ],
        sound: [
          "../../../COMM/SOUND/2_2_5/2_1_2-5_002.mp3",
          "../../../COMM/SOUND/2_2_5/2_1_2-5_003.mp3",
          "../../../COMM/SOUND/2_2_5/2_1_2-5_004.mp3",
        ],
      };
      let audio = new Audio(intro.sound[0]);
      let audioIdx = 1;
      //현재 페이지
      let disPage = 1;
      //현재까지 맞춘 문항
      let clearPage = 0;

      let nextAudioIndex = 1;

      //각 스탭 별 스코어 (필요할 경우에만 존재)
      let step2Score = 0;
      let step3Score = 0;
      let step4Score = 0;
      let step5Score = 0;

      let pageData = [
        { title: "삼각형을 찾아보세요.", sound: "" },
        { title: "□ 안에 알맞은 말을 찾아보세요.", sound: "" },
        { title: "□ 안에 알맞은 말을 찾아보세요", sound: "" },
        { title: "□ 안에 알맞은 말을 찾아보세요", sound: "" },
        { title: "□ 안에 알맞은 말을 찾아보세요", sound: "" },
      ];

      $(document).ready(function () {
        dregFn();
        dropppFn();
        $(".startBtn").on("click", () => {
          audioPlay(audio, intro.sound, (idx) => {
            if (idx == 2) {
              console.log("!!!!");
            }
          });
        });
      });

      // =====================step1=====================
      $(".step1 .btn.btn1").click(() => {
        correctly();
      });
      $(".step1 .btn.btn2").click(() => {});
      $(".step1 .btn.btn3").click(() => {});

      // =====================step2=====================
      $(".step2 .btn.btn1").click(() => {});
      $(".step2 .btn.btn2").click(() => {});

      // =====================step3=====================

      //이전 버튼
      $(".btn-prev").click(() => {
        pageMove("prev");
        disPage -= 1;
        pageAction();
      });
      //다음 버튼
      $(".btn-next").click(() => {
        pageMove("next");
        disPage += 1;
        pageAction();
      });

      function pageAction() {
        console.log("disPage ::: ", disPage);
        stepSet();
        nextPrevBtnSet();
        switch (disPage) {
          case 1:
            step1Start();
            break;
          case 2:
            step2Start();
            break;
          case 7:
            step7Start();
            break;
          case 8:
            step8Start();
            break;
        }
      }

      //상단 스텝, 페이지 set
      const stepSet = () => {
        $(".step-list_item").removeClass("active");
        $(".step-list_item")
          .eq(disPage - 1)
          .addClass("active");
        $(".step").css("display", "none");
        $(".step")
          .eq(disPage - 1)
          .css("display", "block");
        headerSet(pageData[disPage - 1].title);
      };

      //정답 맞춘 경우
      const correctly = () => {
        clearPage += 1;
        //맞춘 페이지 전체 버튼 disabled;
        $(`.step${clearPage} button`).attr("disabled", true);
        nextPrevBtnSet();
      };

      //뒤로가기, 앞으로가기 disabled set
      const nextPrevBtnSet = () => {
        if (disPage <= clearPage) {
          $(".main_prev-next .btn-next").attr("disabled", false);
        }
        if (disPage >= clearPage) {
          $(".main_prev-next .btn-prev").attr("disabled", false);
        }
        if (disPage <= 1) {
          $(".main_prev-next .btn-prev").attr("disabled", true);
        }
        if (disPage > clearPage) {
          $(".main_prev-next .btn-next").attr("disabled", true);
        }
        if (disPage === 5) {
          $(".main_prev-next .btn-next").attr("disabled", true);
        }
      };

      //헤더 타이틀, 사운드 셋팅
      const headerSet = (title = "", sound = "") => {
        $(".header_title h3").html(title);
      };

      // 드래그 할 경우 함수
      const dregFn = () => {
        $(".draggable")
          .draggable()
          .on("draggable:start", function (droppp, drag) {})
          .on("draggable:stop", function (droppp, drag) {});
      };

      //드롭 할 경우 함수
      const dropppFn = () => {
        $(".droppable")
          .droppable()
          .on("droppable:drop", function (droppp, drag) {
            let dragAnswer = drag.item[0].dataset.val;
            let answer = droppp.currentTarget.dataset.val;
            if (answer === dragAnswer) {
              $(droppp.currentTarget)
                .find(".placeholder")
                .css("display", "none");
              if (disPage === 2) {
                step2Score += 1;
                if (step2Score === 2) {
                  correctly();
                }
              }
              if (disPage === 3) {
                step3Score += 1;
                if (step3Score === 2) {
                  correctly();
                }
              }
              if (disPage === 4) {
                step4Score += 1;
                if (step4Score === 2) {
                  correctly();
                }
              }
              if (disPage === 5) {
                step5Score += 1;
                if (step5Score === 2) {
                  correctly();
                }
              }
            } else {
              return false;
            }
            drag.item.addClass("pointerNone");
          });
      };
    </script>
  </body>
</html>
